!function(a){var b=function(b,c,d){var e=a(b).attr("data"),f=a(b).parent();if(f.hasClass("Multi")){if(a(b).hasClass("active")){a(b).removeClass("active");var g=e;d.splice(a.inArray(g,d),1)}else a(b).addClass("active"),d.push(e);f.siblings("select").val(d)}f.hasClass("Multi")||(f.siblings("select").val(e),a(b).siblings("a."+c).removeClass("active"),a(b).addClass("active"))},c=function(b,c,d,e,f){var g=document.createElement("a"),h=document.createElement("div");a(g).addClass(b).addClass("mcs").html(c).appendTo(f),e===!0&&a(h).addClass("Multi"),a(h).addClass(d).appendTo(f)},d=function(b,c,d,e,f){var g,h=0,i="",j=a(b).parent();h++;var k="";c===!0&&(k=a(b).text()),null!==d&&(i="' id='"+d+h.toString()),g="<a class='"+e+"' data='"+a(b).attr("value")+i+"'>"+k+"</a>",j.siblings("."+f).append(g)},e=function(a){var b=a.find("select");b.show(),b.next().hasClass("mcs")&&(b.next().remove(),b.next().remove())};a.fn.MultiColumnSelect=function(e){var h,f=[];h=0;var i=a.extend({multiple:!1,useOptionText:!0,hideselect:!0,openmenuClass:"mcs-open",openmenuText:"Choose An Option",openclass:"open",containerClass:"mcs-container",itemClass:"mcs-item",idprefix:null,duration:200,onOpen:null,onClose:null,onItemSelect:null},e);return this.find("select").val(0),i.hideselect===!0?this.find("select").hide():this.find("select").show(),c(i.openmenuClass,i.openmenuText,i.containerClass,i.multiple,this),this.find("select option").each(function(){if(a(this).attr("selected")){d(this,i.useOptionText,i.idprefix,[i.itemClass+" selected"],i.containerClass);var c=a(".selected").parent().prev().prev();null!==c.val()&&(f=c.val()),b(a(".selected"),i.itemClass,f),a(".selected").toggleClass("selected")}else d(this,i.useOptionText,i.idprefix,i.itemClass,i.containerClass)}),this.on("click","."+i.itemClass,function(c){var d=a(this).parent().prev().prev();null!==d.val()&&(f=d.val()),b(this,i.itemClass,f),a.isFunction(i.onItemSelect)&&i.onItemSelect.call(this),c.preventDefault()}),this.find("."+i.openmenuClass).on("click",function(b){var c=a(this).next();a(this).hasClass(i.openclass)?(a(this).removeClass(i.openclass),c.slideToggle("slow",function(){a.isFunction(i.onClose)&&i.onClose.call(this)})):(a(this).addClass(i.openclass),c.slideToggle("slow",function(){a.isFunction(i.onOpen)&&i.onOpen.call(this)})),b.preventDefault()}),this},a.fn.MultiColumnSelectDestroy=function(){e(this)},a.fn.MultiColumnSelectAddItem=function(b,c,d){var e=this.find("select"),f=this.find("select options").size();e.append(a("<option/>",{value:b,text:c}));var g=e.next();if(g.hasClass("mcs")){var h=g.next(),i=h.children(),j=i.attr("class");j=j.substring(0,j.indexOf(" "));var k="";"undefined"!=typeof d&&(k="' id='"+d+f.toString());var l="<a class='"+j+" additem' data='"+b.toString()+k+"'>"+c+"</a>";h.append(l)}}}(jQuery);