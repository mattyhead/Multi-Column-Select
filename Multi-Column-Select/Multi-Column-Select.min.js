!function(a){optioncount=0,itemclick=function(b,c,d){var e=a(b).attr("data"),f=a(b).parent();if(f.hasClass("Multi")){if(a(b).hasClass("active")){a(b).removeClass("active");var g=e;d.splice(a.inArray(g,d),1)}else a(b).addClass("active"),d.push(e);f.siblings("select").val(d)}f.hasClass("Multi")||(f.siblings("select").val(e),a(b).siblings("a."+c).removeClass("active"),a(b).addClass("active"))},init_msc=function(b,c,d,e,f){var g=document.createElement("a"),h=document.createElement("div");a(g).addClass(b).addClass("mcs").html(c).appendTo(f),e===!0&&a(h).addClass("Multi"),a(h).addClass(d).appendTo(f)},generateitems=function(b,c,d,e,f){var g,h="",i=a(b).parent();optioncount++;var j="";c===!0&&(j=a(b).text()),null!==d&&(h="' id='"+d+optioncount.toString()),g="<a class='"+e+"' data='"+a(b).attr("value")+h+"'>"+j+"</a>",i.siblings("."+f).append(g)},destroymsc=function(a){var b=a.find("select");b.show(),b.next().hasClass("mcs")&&(b.next().remove(),b.next().remove())},a.fn.MultiColumnSelect=function(b){var e,c=[];e=0;var f=a.extend({multiple:!1,useOptionText:!0,hideselect:!0,openmenuClass:"mcs-open",openmenuText:"Choose An Option",openclass:"open",containerClass:"mcs-container",itemClass:"mcs-item",idprefix:null,duration:200,onOpen:null,onClose:null,onItemSelect:null},b);return this.find("select").val(0),f.hideselect===!0?this.find("select").hide():this.find("select").show(),init_msc(f.openmenuClass,f.openmenuText,f.containerClass,f.multiple,this),this.find("select option").each(function(){if(a(this).attr("selected")){generateitems(this,f.useOptionText,f.idprefix,[f.itemClass+" selected"],f.containerClass);var b=a(".selected").parent().prev().prev();null!==b.val()&&(c=b.val()),itemclick(a(".selected"),f.itemClass,c),a(".selected").toggleClass("selected")}else generateitems(this,f.useOptionText,f.idprefix,f.itemClass,f.containerClass)}),this.on("click","."+f.itemClass,function(b){var d=a(this).parent().prev().prev();null!==d.val()&&(c=d.val()),itemclick(this,f.itemClass,c),a.isFunction(f.onItemSelect)&&f.onItemSelect.call(this),b.preventDefault()}),this.find("."+f.openmenuClass).on("click",function(b){var c=a(this).next();a(this).hasClass(f.openclass)?(a(this).removeClass(f.openclass),c.slideToggle("slow",function(){a.isFunction(f.onClose)&&f.onClose.call(this)})):(a(this).addClass(f.openclass),c.slideToggle("slow",function(){a.isFunction(f.onOpen)&&f.onOpen.call(this)})),b.preventDefault()}),this},a.fn.MultiColumnSelectDestroy=function(){destroymsc(this)},a.fn.MultiColumnSelectAddItem=function(b,c,d){var e=this.find("select"),f=this.find("select options").size();e.append(a("<option/>",{value:b,text:c}));var g=e.next();if(g.hasClass("mcs")){var h=g.next(),i=h.children(),j=i.attr("class");j=j.substring(0,j.indexOf(" "));var k="";"undefined"!=typeof d&&(k="' id='"+d+f.toString());var l="<a class='"+j+" additem' data='"+b.toString()+k+"'>"+c+"</a>";h.append(l)}}}(jQuery);