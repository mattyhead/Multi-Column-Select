!function(a){optioncount=0,itemclick=function(b,c,d){var e=a(b).attr("data"),f=a(b).parent();if(f.hasClass("Multi")){if(a(b).hasClass("active")){a(b).removeClass("active");var g=e;d.splice(a.inArray(g,d),1)}else a(b).addClass("active"),d.push(e);f.siblings("select").val(d)}f.hasClass("Multi")||(f.siblings("select").val(e),a(b).siblings("a."+c).removeClass("active"),a(b).addClass("active"))},init_msc=function(b,c,d,e,f){var g=document.createElement("a"),h=document.createElement("div");a(g).addClass(b).addClass("mcs").html(c).appendTo(f),e===!0&&a(h).addClass("Multi"),a(h).addClass(d).appendTo(f)},generateitems=function(b,c,d,e,f){var g,h="",i=a(b).parent();optioncount++;var j="";c===!0&&(j=a(b).text()),"undefined"!=typeof d&&d.length()&&(h="' id='"+d+optioncount.toString()),g="<a class='"+e+"' data='"+a(b).attr("value")+h+"'>"+j+"</a>",i.siblings("."+f).append(g)},destroymsc=function(a){var b=a.find("select");b.show(),b.next().hasClass("mcs")&&(b.next().remove(),b.next().remove())},a.fn.MultiColumnSelect=function(b){var c=[],e=a.extend({multiple:!1,useOptionText:!0,hideselect:!0,openmenuClass:"mcs-open",openmenuText:"Choose An Option",openclass:"open",containerClass:"mcs-container",itemClass:"mcs-item",idprefix:null,duration:200,onOpen:null,onClose:null,onItemSelect:null},b);return this.find("select").val(0),e.hideselect===!0?this.find("select").hide():this.find("select").show(),init_msc(e.openmenuClass,e.openmenuText,e.containerClass,e.multiple,this),this.find("select option").each(function(){if(a(this).attr("selected")){generateitems(this,e.useOptionText,e.idprefix,[e.itemClass+" selected"],e.containerClass);var b=a(".selected").parent().prev().prev();null!==b.val()&&(c=b.val()),itemclick(a(".selected"),e.itemClass,c),a(".selected").toggleClass("selected")}else generateitems(this,e.useOptionText,e.idprefix,e.itemClass,e.containerClass)}),this.on("click","."+e.itemClass,function(b){var d=a(this).parent().prev().prev();null!==d.val()&&(c=d.val()),itemclick(this,e.itemClass,c),a.isFunction(e.onItemSelect)&&e.onItemSelect.call(this),b.preventDefault()}),this.find("."+e.openmenuClass).on("click",function(b){var c=a(this).next();a(this).hasClass(e.openclass)?(a(this).removeClass(e.openclass),c.slideToggle("slow",function(){a.isFunction(e.onClose)&&e.onClose.call(this)})):(a(this).addClass(e.openclass),c.slideToggle("slow",function(){a.isFunction(e.onOpen)&&e.onOpen.call(this)})),b.preventDefault()}),this},a.fn.MultiColumnSelectDestroy=function(){destroymsc(this)},a.fn.MultiColumnSelectAddItem=function(b,c,d){var e=this.find("select"),f=this.find("select options").size();e.append(a("<option/>",{value:b,text:c}));var g=e.next();if(g.hasClass("mcs")){var h=g.next(),i=h.children(),j=i.attr("class");j=j.substring(0,j.indexOf(" "));var k="";"undefined"!=typeof d&&d.length()&&(k="' id='"+d+f.toString());var l="<a class='"+j+" additem' data='"+b.toString()+k+"'>"+c+"</a>";h.append(l)}}}(jQuery);